!function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var p="function"==typeof require&&require;if(!f&&p)return p(i,!0);if(u)return u(i,!0);throw(p=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",p}p=n[i]={exports:{}},e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){function highlight(doc){this.doc=doc}highlight.prototype.getTitle=function(){return this.doc.querySelector(".a-spacing-top-small.a-color-base").innerText},highlight.prototype.getAuthor=function(){return this.doc.querySelector(".a-spacing-none.a-spacing-top-micro").innerText},highlight.prototype.getHighlightTags=function(){return this.doc.querySelectorAll("#highlight")},highlight.prototype.getLocationTags=function(){return this.doc.querySelectorAll("#annotationHighlightHeader")},highlight.prototype.getMemoTags=function(){return this.doc.querySelectorAll("#note")},highlight.prototype.getHighlightLength=function(){return parseInt(this.doc.querySelector("#kp-notebook-highlights-count").innerText)},highlight.prototype.getAsin=function(){return document.querySelector("#kp-notebook-annotations-asin").value},module.exports=highlight},{}],2:[function(require,module,exports){function highlightFormatter(){var util=require("./util"),Highlight=0<(Highlight=navigator.userAgent).indexOf("iPhone")||0<Highlight.indexOf("iPod")||0<Highlight.indexOf("Android")&&0<Highlight.indexOf("Mobile")?require("./highlight_sp"):require("./highlight");util.defineInnerTextForFirefox(),this.highlight=new Highlight(document),this.highlight_html=[]}highlightFormatter.prototype.output=function(option){null==option&&(option={}),this.outputHighlightInfo(option),this.outputExecute()},highlightFormatter.prototype.outputExecute=function(){document.title=this.highlight.getTitle(),document.body.removeAttribute("class"),document.body.style.fontFamily="arial,sans-serif",document.body.style.fontSize=".75em",document.body.style.color="#333",document.body.style.lineHeight="1.5em",document.body.innerHTML=this.highlight_html.join("")},highlightFormatter.prototype.outputHighlightInfoBase=function(callback){this.highlight_html.push('<div class="highlights">'),callback(),this.highlight_html.push("</div>")},highlightFormatter.prototype.outputHighlightInfo=function(option){var that=this;this.outputHighlightInfoBase(function(){for(var i=0,len=that.highlight.getHighlightLength();i<len;i++){var memo,highlight=that.highlight.getHighlightTags()[i];highlight&&(that.highlight_html.push("<p>"+highlight.innerText+"</p>"),!0===option.with_location&&(memo=that.highlight.getLocationTags()[i].innerText.match(/\d+(,?)(\d+)?/)[0].replace(/,/,""),that.highlight_html.push("<p>[Read more at location "+memo+"](kindle://book?action=open&asin="+that.highlight.getAsin()+"&location="+memo+")</p>")),!0!==option.with_memo||""!=(memo=that.highlight.getMemoTags()[i].innerText)&&that.highlight_html.push("<p>Note: "+memo+"</p>"),that.highlight_html.push("<p>---</p>"))}})},module.exports=highlightFormatter},{"./highlight":1,"./highlight_sp":3,"./util":5}],3:[function(require,module,exports){function highlight(doc){this.doc=doc}highlight.prototype.getTitle=function(){return this.doc.querySelector("h3.a-spacing-top-mini.a-color-base").innerText},highlight.prototype.getAuthor=function(){return this.doc.querySelector(".a-size-small.a-color-secondary").innerText},highlight.prototype.getHighlightTags=function(){return this.doc.querySelectorAll("#highlight")},highlight.prototype.getLocationTags=function(){return this.doc.querySelectorAll("#annotationHighlightHeader")},highlight.prototype.getMemoTags=function(){return this.doc.querySelectorAll("#note")},highlight.prototype.getHighlightLength=function(){return parseInt(this.doc.querySelector("#kp-notebook-highlights-count").innerText)},highlight.prototype.getAsin=function(){return document.querySelector("#kp-notebook-annotations-asin").value},module.exports=highlight},{}],4:[function(require,module,exports){!function(){"use strict";(new(require("./highlightFormatter"))).output({with_memo:!0})}(document)},{"./highlightFormatter":2}],5:[function(require,module,exports){var util={defineInnerTextForFirefox:function(){null==document.createElement("div").innerText&&Object.defineProperty(HTMLElement.prototype,"innerText",{get:function(){return this.textContent},set:function(v){this.textContent=v}})}};module.exports=util},{}]},{},[4]);
